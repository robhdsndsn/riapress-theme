{"version":3,"file":"query-taxonomy/view.js","mappings":";;;;;;;;;AAAA,+E;;;;;;;;;;ACAA,4D;;;;;;SCAA;SACA;;SAEA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;;SAEA;SACA;;SAEA;SACA;SACA;;;;;UCtBA;UACA;UACA;UACA,uDAAuD,iBAAiB;UACxE;UACA,gDAAgD,aAAa;UAC7D,E;;;;;;;;;;;;ACN6D;AAE7D,MAAM;EAAEE,KAAK;EAAEC;AAAQ,CAAC,GAAGH,+DAAK,CAAC,cAAc,EAAE;EAC7CE,KAAK,EAAE;IACH,IAAIE,aAAaA,CAAA,EAAG;MAAA,IAAAC,qBAAA;MAChB,MAAM;QAAEC;MAAQ,CAAC,GAAGL,oEAAU,CAAC,CAAC;MAChC,QAAAI,qBAAA,GAAOC,OAAO,EAAEF,aAAa,cAAAC,qBAAA,cAAAA,qBAAA,GAAI,EAAE;IACvC;EACJ,CAAC;EACDF,OAAO,EAAE;IACL,CAACI,QAAQA,CAACC,KAAK,EAAE;MACbA,KAAK,CAACC,cAAc,CAAC,CAAC;MACtB,MAAM;QAAEN;MAAQ,CAAC,GAAG,MAAM,8JAAyC;MACnE,MAAMA,OAAO,CAACI,QAAQ,CAACC,KAAK,CAACE,MAAM,CAACC,KAAK,CAAC;IAC9C,CAAC;IACD,CAACC,WAAWA,CAACJ,KAAK,EAAE;MAChBA,KAAK,CAACC,cAAc,CAAC,CAAC;MACtB,MAAM;QAAEI;MAAI,CAAC,GAAGZ,oEAAU,CAAC,CAAC;MAC5B,MAAMa,IAAI,GAAGD,GAAG,CAACE,OAAO,CAAC,MAAM,CAAC;MAChC,MAAMC,UAAU,GAAGF,IAAI,CAACG,gBAAgB,CAAC,wBAAwB,CAAC;MAClE,MAAMb,aAAa,GAAGc,KAAK,CAACC,IAAI,CAACH,UAAU,CAAC,CACvCI,MAAM,CAACC,EAAE,IAAIA,EAAE,CAACC,OAAO,CAAC,CACxBC,GAAG,CAACF,EAAE,IAAIA,EAAE,CAACV,KAAK,CAAC;MAExB,MAAMa,GAAG,GAAG,IAAIC,GAAG,CAACX,IAAI,CAACY,MAAM,CAAC;MAChC,MAAMC,QAAQ,GAAGX,UAAU,CAAC,CAAC,CAAC,CAACY,IAAI,CAACC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC;MAErD,IAAIzB,aAAa,CAAC0B,MAAM,GAAG,CAAC,EAAE;QAC1BN,GAAG,CAACO,YAAY,CAACC,GAAG,CAACL,QAAQ,EAAEvB,aAAa,CAAC6B,IAAI,CAAC,GAAG,CAAC,CAAC;MAC3D,CAAC,MAAM;QACHT,GAAG,CAACO,YAAY,CAACG,MAAM,CAACP,QAAQ,CAAC;MACrC;;MAEA;MACAH,GAAG,CAACO,YAAY,CAACG,MAAM,CAACP,QAAQ,CAACE,OAAO,CAAC,aAAa,EAAE,QAAQ,CAAC,GAAG,OAAO,CAAC;MAE5E,MAAM;QAAE1B;MAAQ,CAAC,GAAG,MAAM,8JAAyC;MACnE,MAAMA,OAAO,CAACI,QAAQ,CAACiB,GAAG,CAACW,QAAQ,CAAC,CAAC,CAAC;IAC1C;EACJ;AACJ,CAAC,CAAC,C","sources":["webpack://query-loop-filter/external module \"@wordpress/interactivity\"","webpack://query-loop-filter/external import \"@wordpress/interactivity-router\"","webpack://query-loop-filter/webpack/bootstrap","webpack://query-loop-filter/webpack/runtime/make namespace object","webpack://query-loop-filter/./src/query-taxonomy/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","module.exports = import(\"@wordpress/interactivity-router\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { store, getElement } from '@wordpress/interactivity';\n\nconst { state, actions } = store('query-filter', {\n    state: {\n        get selectedTerms() {\n            const { context } = getElement();\n            return context?.selectedTerms ?? [];\n        }\n    },\n    actions: {\n        *navigate(event) {\n            event.preventDefault();\n            const { actions } = yield import('@wordpress/interactivity-router');\n            yield actions.navigate(event.target.value);\n        },\n        *updateTerms(event) {\n            event.preventDefault();\n            const { ref } = getElement();\n            const form = ref.closest('form');\n            const checkboxes = form.querySelectorAll('input[type=\"checkbox\"]');\n            const selectedTerms = Array.from(checkboxes)\n                .filter(cb => cb.checked)\n                .map(cb => cb.value);\n            \n            const url = new URL(form.action);\n            const queryVar = checkboxes[0].name.replace('[]', '');\n\n            if (selectedTerms.length > 0) {\n                url.searchParams.set(queryVar, selectedTerms.join(','));\n            } else {\n                url.searchParams.delete(queryVar);\n            }\n\n            // Remove the page parameter to reset pagination\n            url.searchParams.delete(queryVar.replace(/^query-\\d*-/, 'query-') + '-page');\n\n            const { actions } = yield import('@wordpress/interactivity-router');\n            yield actions.navigate(url.toString());\n        }\n    },\n});\n"],"names":["store","getElement","state","actions","selectedTerms","_context$selectedTerm","context","navigate","event","preventDefault","target","value","updateTerms","ref","form","closest","checkboxes","querySelectorAll","Array","from","filter","cb","checked","map","url","URL","action","queryVar","name","replace","length","searchParams","set","join","delete","toString"],"sourceRoot":""}