{"version":3,"file":"query-active-filters/view.js","mappings":";;;;;;;;;AAAA,+E;;;;;;;;;;ACAA,4D;;;;;;SCAA;SACA;;SAEA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;;SAEA;SACA;;SAEA;SACA;SACA;;;;;UCtBA;UACA;UACA;UACA,uDAAuD,iBAAiB;UACxE;UACA,gDAAgD,aAAa;UAC7D,E;;;;;;;;;;;;ACNA;AACA;AACA;AAC6D;AAC7DE,OAAO,CAACC,GAAG,CAAC,wCAAwC,CAAC;AAErD,MAAM;EAAEC,KAAK;EAAEC;AAAQ,CAAC,GAAGL,+DAAK,CAAC,sBAAsB,EAAE;EACrDI,KAAK,EAAE;IACH,IAAIE,OAAOA,CAAA,EAAG;MACV,OAAOL,oEAAU,CAAC,CAAC,CAACK,OAAO,IAAI,EAAE;IACrC,CAAC;IACD,IAAIC,OAAOA,CAAA,EAAG;MACV,OAAON,oEAAU,CAAC,CAAC,CAACM,OAAO,IAAI,CAAC;IACpC;EACJ,CAAC;EACDF,OAAO,EAAE;IACL,CAACG,YAAYA,CAACC,KAAK,EAAE;MACjB,MAAMC,KAAK,GAAGD,KAAK,CAACE,MAAM,CAACC,OAAO,CAACC,WAAW;MAC9C,MAAMC,KAAK,GAAGL,KAAK,CAACE,MAAM,CAACC,OAAO,CAACG,WAAW;MAE9C,IAAI,CAACL,KAAK,EAAE;MAEZD,KAAK,CAACO,cAAc,CAAC,CAAC;MAEtB,MAAMC,UAAU,GAAG,IAAIC,GAAG,CAACC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAC;MAEhD,IAAIP,KAAK,IAAIG,UAAU,CAACK,YAAY,CAACC,GAAG,CAACb,KAAK,CAAC,EAAE;QAC7C;QACA,MAAMc,aAAa,GAAGP,UAAU,CAACK,YAAY,CAACG,GAAG,CAACf,KAAK,CAAC,CAACgB,KAAK,CAAC,GAAG,CAAC;QACnE,MAAMC,SAAS,GAAGH,aAAa,CAACI,MAAM,CAACC,CAAC,IAAIA,CAAC,KAAKf,KAAK,CAAC;QAExD,IAAIa,SAAS,CAACG,MAAM,EAAE;UAClBb,UAAU,CAACK,YAAY,CAACS,GAAG,CAACrB,KAAK,EAAEiB,SAAS,CAACK,IAAI,CAAC,GAAG,CAAC,CAAC;QAC3D,CAAC,MAAM;UACHf,UAAU,CAACK,YAAY,CAACW,MAAM,CAACvB,KAAK,CAAC;QACzC;MACJ,CAAC,MAAM;QACH;QACAO,UAAU,CAACK,YAAY,CAACW,MAAM,CAACvB,KAAK,CAAC;MACzC;;MAEA;MACA,MAAM;QAAEL,OAAO,EAAE6B;MAAc,CAAC,GAAG,MAAM,8JAAyC;MAClF,MAAMA,aAAa,CAACC,QAAQ,CAAClB,UAAU,CAACmB,QAAQ,CAAC,CAAC,CAAC;IACvD;EACJ,CAAC;EACDC,SAAS,EAAE;IACPC,IAAIA,CAAA,EAAG;MACH;MACA,MAAMC,QAAQ,GAAG,IAAIC,gBAAgB,CAAC,MAAM;QACxC,MAAMvB,UAAU,GAAGE,MAAM,CAACC,QAAQ,CAACC,IAAI;QACvC,IAAIJ,UAAU,KAAKb,KAAK,CAACqC,OAAO,EAAE;UAC9BrC,KAAK,CAACqC,OAAO,GAAGxB,UAAU;UAC1ByB,OAAO,CAACC,kBAAkB,CAAC,CAAC;QAChC;MACJ,CAAC,CAAC;MAEFJ,QAAQ,CAACK,OAAO,CAACC,QAAQ,CAACC,eAAe,EAAE;QACvCC,SAAS,EAAE,IAAI;QACfC,OAAO,EAAE;MACb,CAAC,CAAC;IACN;EACJ;AACJ,CAAC,CAAC,C","sources":["webpack://query-loop-filter/external module \"@wordpress/interactivity\"","webpack://query-loop-filter/external import \"@wordpress/interactivity-router\"","webpack://query-loop-filter/webpack/bootstrap","webpack://query-loop-filter/webpack/runtime/make namespace object","webpack://query-loop-filter/./src/query-active-filters/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","module.exports = import(\"@wordpress/interactivity-router\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/**\n * WordPress Interactivity API implementation for Query Active Filters.\n */\nimport { store, getContext } from '@wordpress/interactivity';\nconsole.log('Query Active Filters store initialized');\n\nconst { state, actions } = store('query-active-filters', {\n    state: {\n        get filters() {\n            return getContext().filters || [];\n        },\n        get queryId() {\n            return getContext().queryId || 0;\n        }\n    },\n    actions: {\n        *removeFilter(event) {\n            const param = event.target.dataset.filterParam;\n            const value = event.target.dataset.filterValue;\n            \n            if (!param) return;\n            \n            event.preventDefault();\n            \n            const currentUrl = new URL(window.location.href);\n            \n            if (value && currentUrl.searchParams.has(param)) {\n                // Handle multi-value taxonomy filters\n                const currentValues = currentUrl.searchParams.get(param).split(',');\n                const newValues = currentValues.filter(v => v !== value);\n                \n                if (newValues.length) {\n                    currentUrl.searchParams.set(param, newValues.join(','));\n                } else {\n                    currentUrl.searchParams.delete(param);\n                }\n            } else {\n                // Handle single value filters\n                currentUrl.searchParams.delete(param);\n            }\n            \n            // Use client-side navigation via the router\n            const { actions: routerActions } = yield import('@wordpress/interactivity-router');\n            yield routerActions.navigate(currentUrl.toString());\n        }\n    },\n    callbacks: {\n        init() {\n            // Add a URL change observer\n            const observer = new MutationObserver(() => {\n                const currentUrl = window.location.href;\n                if (currentUrl !== state.lastUrl) {\n                    state.lastUrl = currentUrl;\n                    effects.updateFiltersState();\n                }\n            });\n\n            observer.observe(document.documentElement, {\n                childList: true,\n                subtree: true\n            });\n        }\n    }\n});\n"],"names":["store","getContext","console","log","state","actions","filters","queryId","removeFilter","event","param","target","dataset","filterParam","value","filterValue","preventDefault","currentUrl","URL","window","location","href","searchParams","has","currentValues","get","split","newValues","filter","v","length","set","join","delete","routerActions","navigate","toString","callbacks","init","observer","MutationObserver","lastUrl","effects","updateFiltersState","observe","document","documentElement","childList","subtree"],"sourceRoot":""}