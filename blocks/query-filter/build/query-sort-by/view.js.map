{"version":3,"file":"query-sort-by/view.js","mappings":";;;;;;;;;AAAA,+E;;;;;;;;;;ACAA,4D;;;;;;SCAA;SACA;;SAEA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;SACA;;SAEA;SACA;;SAEA;SACA;SACA;;;;;UCtBA;UACA;UACA;UACA,uDAAuD,iBAAiB;UACxE;UACA,gDAAgD,aAAa;UAC7D,E;;;;;;;;;;;;ACN6D;AAE7D,MAAM;EAAEE;AAAM,CAAC,GAAGF,+DAAK,CAAE,cAAc,EAAE;EACvCG,OAAO,EAAE;IACP,CAACC,SAASA,CAAEC,KAAK,EAAG;MAClBA,KAAK,CAACC,cAAc,CAAC,CAAC;MACtB,MAAM;QAAEC;MAAI,CAAC,GAAGN,oEAAU,CAAC,CAAC;MAC5B,MAAMO,MAAM,GAAGD,GAAG,CAACE,OAAO,KAAK,QAAQ,GAAGF,GAAG,GAAGA,GAAG,CAACG,aAAa,CAAE,QAAS,CAAC;MAC7E,MAAMC,KAAK,GAAGH,MAAM,CAACG,KAAK;MAC1B,IAAIC,MAAM,GAAG,MAAM;QAAEC,SAAS,GAAG,MAAM;MACvC,IAAKF,KAAK,KAAK,WAAW,EAAG;QAAEC,MAAM,GAAG,MAAM;QAAEC,SAAS,GAAG,MAAM;MAAE;MACpE,IAAKF,KAAK,KAAK,UAAU,EAAG;QAAEC,MAAM,GAAG,MAAM;QAAEC,SAAS,GAAG,KAAK;MAAE;MAClE,IAAKF,KAAK,KAAK,WAAW,EAAG;QAAEC,MAAM,GAAG,OAAO;QAAEC,SAAS,GAAG,KAAK;MAAE;MACpE,IAAKF,KAAK,KAAK,YAAY,EAAG;QAAEC,MAAM,GAAG,OAAO;QAAEC,SAAS,GAAG,MAAM;MAAE;MACtEX,KAAK,CAACU,MAAM,GAAGA,MAAM;MACrBV,KAAK,CAACW,SAAS,GAAGA,SAAS;;MAE3B;MACA,MAAMC,IAAI,GAAGP,GAAG,CAACQ,OAAO,CAAE,MAAO,CAAC,IAAIR,GAAG;MACzC,MAAMS,YAAY,GAAGF,IAAI,CAACJ,aAAa,CAAE,uCAAwC,CAAC;MAClF,MAAMO,UAAU,GAAGH,IAAI,CAACJ,aAAa,CAAE,qCAAsC,CAAC;MAC9E,IAAKM,YAAY,EAAGA,YAAY,CAACL,KAAK,GAAGC,MAAM;MAC/C,IAAKK,UAAU,EAAGA,UAAU,CAACN,KAAK,GAAGE,SAAS;;MAE9C;MACA,MAAMK,MAAM,GAAGJ,IAAI,CAACI,MAAM;MAC1B,MAAMC,GAAG,GAAG,IAAIC,GAAG,CAAEF,MAAO,CAAC;MAC7B;MACA,MAAMG,QAAQ,GAAG,IAAIC,QAAQ,CAAER,IAAK,CAAC;MACrC,KAAM,MAAM,CAAES,GAAG,EAAEC,GAAG,CAAE,IAAIH,QAAQ,CAACI,OAAO,CAAC,CAAC,EAAG;QAC/CN,GAAG,CAACO,YAAY,CAACC,GAAG,CAAEJ,GAAG,EAAEC,GAAI,CAAC;MAClC;MAEA,MAAM;QAAErB;MAAQ,CAAC,GAAG,MAAM,8JAA2C;MACrE,MAAMA,OAAO,CAACyB,QAAQ,CAAET,GAAG,CAACU,QAAQ,CAAC,CAAE,CAAC;IAC1C;EACF;AACF,CAAE,CAAC,C","sources":["webpack://query-loop-filter/external module \"@wordpress/interactivity\"","webpack://query-loop-filter/external import \"@wordpress/interactivity-router\"","webpack://query-loop-filter/webpack/bootstrap","webpack://query-loop-filter/webpack/runtime/make namespace object","webpack://query-loop-filter/./src/query-sort-by/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","module.exports = import(\"@wordpress/interactivity-router\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { store, getElement } from '@wordpress/interactivity';\n\nconst { state } = store( 'query-filter', {\n  actions: {\n    *sortQuery( event ) {\n      event.preventDefault();\n      const { ref } = getElement();\n      const select = ref.tagName === 'SELECT' ? ref : ref.querySelector( 'select' );\n      const value = select.value;\n      let sortBy = 'date', sortOrder = 'desc';\n      if ( value === 'date-desc' ) { sortBy = 'date'; sortOrder = 'desc'; }\n      if ( value === 'date-asc' ) { sortBy = 'date'; sortOrder = 'asc'; }\n      if ( value === 'title-asc' ) { sortBy = 'title'; sortOrder = 'asc'; }\n      if ( value === 'title-desc' ) { sortBy = 'title'; sortOrder = 'desc'; }\n      state.sortBy = sortBy;\n      state.sortOrder = sortOrder;\n\n      // Find the hidden inputs for orderby and order\n      const form = ref.closest( 'form' ) || ref;\n      const orderbyInput = form.querySelector( 'input[type=\"hidden\"][name$=\"orderby\"]' );\n      const orderInput = form.querySelector( 'input[type=\"hidden\"][name$=\"order\"]' );\n      if ( orderbyInput ) orderbyInput.value = sortBy;\n      if ( orderInput ) orderInput.value = sortOrder;\n\n      // Build the new URL with updated orderby/order params\n      const action = form.action;\n      const url = new URL( action );\n      // Add all form fields to the URL\n      const formData = new FormData( form );\n      for ( const [ key, val ] of formData.entries() ) {\n        url.searchParams.set( key, val );\n      }\n\n      const { actions } = yield import( '@wordpress/interactivity-router' );\n      yield actions.navigate( url.toString() );\n    },\n  },\n} );\n"],"names":["store","getElement","state","actions","sortQuery","event","preventDefault","ref","select","tagName","querySelector","value","sortBy","sortOrder","form","closest","orderbyInput","orderInput","action","url","URL","formData","FormData","key","val","entries","searchParams","set","navigate","toString"],"sourceRoot":""}