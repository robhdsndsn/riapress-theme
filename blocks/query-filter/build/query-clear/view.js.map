{"version":3,"file":"query-clear/view.js","mappings":"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","sources":["webpack://query-loop-filter/external module \"@wordpress/interactivity\"","webpack://query-loop-filter/external import \"@wordpress/interactivity-router\"","webpack://query-loop-filter/webpack/bootstrap","webpack://query-loop-filter/webpack/runtime/make namespace object","webpack://query-loop-filter/./src/query-clear/view.js"],"sourcesContent":["module.exports = __WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__;","module.exports = import(\"@wordpress/interactivity-router\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { store, getElement } from '@wordpress/interactivity';\n\nconst { state: clearState, actions, effects } = store('query-filter', {\n    state: {\n        hasActiveFilters: false,\n        lastUrl: window.location.href\n    },\n    effects: {\n        checkActiveFilters() {\n            const url = new URL(window.location.href);\n            const hasSearch = url.searchParams.has('s');\n            const queryPrefix = hasSearch ? '' : 'query-';\n\n            for (const [key, value] of url.searchParams.entries()) {\n                if ((key.startsWith(queryPrefix) || key === 's') && value && value.length > 0) {\n                    clearState.hasActiveFilters = true;\n                    return;\n                }\n            }\n            clearState.hasActiveFilters = false;\n        }\n    },\n    actions: {\n        *clearFilters(event) {\n            event.preventDefault();\n            \n            clearState.hasActiveFilters = false;\n            \n            const currentUrl = new URL(window.location.href);\n            const hasSearch = currentUrl.searchParams.has('s');\n            const queryPrefix = hasSearch ? '' : 'query-';\n            \n            const paramsToKeep = Array.from(currentUrl.searchParams.entries())\n                .filter(([key]) => !key.startsWith(queryPrefix) && key !== 's');\n            \n            currentUrl.search = '';\n            paramsToKeep.forEach(([key, value]) => {\n                currentUrl.searchParams.set(key, value);\n            });\n\n            const { actions: routerActions } = yield import('@wordpress/interactivity-router');\n            yield routerActions.navigate(currentUrl.toString());\n        }\n    },\n    callbacks: {\n        init() {\n            effects.checkActiveFilters();\n\n            const observer = new MutationObserver(() => {\n                const currentUrl = window.location.href;\n                if (currentUrl !== clearState.lastUrl) {\n                    clearState.lastUrl = currentUrl;\n                    effects.checkActiveFilters();\n                }\n            });\n\n            observer.observe(document.documentElement, {\n                childList: true,\n                subtree: true\n            });\n        }\n    }\n});"],"names":["store","getElement","state","clearState","actions","effects","hasActiveFilters","lastUrl","window","location","href","checkActiveFilters","url","URL","hasSearch","searchParams","has","queryPrefix","key","value","entries","startsWith","length","clearFilters","event","preventDefault","currentUrl","paramsToKeep","Array","from","filter","search","forEach","set","routerActions","navigate","toString","callbacks","init","observer","MutationObserver","observe","document","documentElement","childList","subtree"],"sourceRoot":""}