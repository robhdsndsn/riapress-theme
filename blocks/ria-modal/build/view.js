!function(){"use strict";let e=null,t=null,o=[],n=null,a=null;function l(){document.querySelectorAll(".wp-block-ria-modal").forEach(t=>{const o=t.querySelector(".modal-trigger"),n=t.querySelector(".modal-overlay"),a=t.querySelector(".modal-content"),l=t.querySelector(".modal-close"),c=JSON.parse(t.dataset.modalConfig||"{}");o&&n&&a?(o.addEventListener("click",e=>{e.preventDefault(),r(t,n,a,c)}),o.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),r(t,n,a,c))}),l&&(l.addEventListener("click",e=>{e.preventDefault(),d(t,n,a)}),l.addEventListener("keydown",e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),d(t,n,a))})),!1!==c.closeOnOverlayClick&&n.addEventListener("click",e=>{e.target===n&&d(t,n,a)}),!1!==c.closeOnEscape&&document.addEventListener("keydown",o=>{"Escape"===o.key&&e===t&&d(t,n,a)}),function(e){const t=e.querySelector(".modal-video-content");if(t){const e=t.dataset.videoUrl;if(e){const o=function(e){const t=e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);if(t&&t[1])return`https://www.youtube.com/embed/${t[1]}`;const o=e.match(/(?:vimeo\.com\/)(\d+)/);return o&&o[1]?`https://player.vimeo.com/video/${o[1]}`:e.includes("embed")?e:(console.warn("RIA Modal: Unsupported video URL format",e),null)}(e);if(o){const e=document.createElement("iframe");e.src=o,e.width="100%",e.height="100%",e.frameBorder="0",e.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",e.allowFullscreen=!0,e.style.aspectRatio="16 / 9",t.appendChild(e)}}}const o=e.querySelector(".modal-form-content");if(o){const e=o.dataset.formId;e&&console.info(`RIA Modal: Form ID ${e} should be rendered here`)}}(a)):console.warn("RIA Modal: Missing required elements",t)})}function r(l,r,d,i){if(t=document.activeElement,r.classList.add("active"),r.setAttribute("aria-hidden","false"),!1!==i.animationEnabled){const e=i.animationType||"fadeInUp",t=i.animationDuration||.6,o=i.animationEasing||"ease-out";d.style.animation=`${e} ${t}s ${o}`,setTimeout(()=>{d.style.animation=""},1e3*t)}e=l,function(e){o=Array.from(e.querySelectorAll('a[href], button:not([disabled]), textarea:not([disabled]), input:not([disabled]), select:not([disabled]), [tabindex]:not([tabindex="-1"])')),0!==o.length&&(n=o[0],a=o[o.length-1],e.addEventListener("keydown",c))}(d),setTimeout(()=>{const e=d.querySelector(".modal-close"),t=d.querySelector("input, textarea, select, button, a[href]");e?e.focus():t&&t.focus()},100),document.body.style.overflow="hidden",l.dispatchEvent(new CustomEvent("riaModalOpen",{detail:{block:l,overlay:r,modal:d}}))}function d(l,r,d,c){r.classList.remove("active"),r.setAttribute("aria-hidden","true"),e=null,t&&(t.focus(),t=null),document.body.style.overflow="",o=[],n=null,a=null,l.dispatchEvent(new CustomEvent("riaModalClose",{detail:{block:l,overlay:r,modal:d}}))}function c(e){"Tab"===e.key&&(e.shiftKey?document.activeElement===n&&(e.preventDefault(),a.focus()):document.activeElement===a&&(e.preventDefault(),n.focus()))}window.RIAModal={open:function(e){const t="string"==typeof e?document.querySelector(e):e;if(!t||!t.classList.contains("wp-block-ria-modal"))return void console.warn("RIA Modal: Invalid block element",e);const o=t.querySelector(".modal-overlay"),n=t.querySelector(".modal-content");r(t,o,n,JSON.parse(t.dataset.modalConfig||"{}"))},close:function(){if(!e)return;const t=e.querySelector(".modal-overlay"),o=e.querySelector(".modal-content");JSON.parse(e.dataset.modalConfig||"{}"),d(e,t,o)},getActive:function(){return e}},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",l):l(),window.MutationObserver&&new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.length&&e.addedNodes.forEach(e=>{1===e.nodeType&&e.classList&&e.classList.contains("wp-block-ria-modal")&&l()})})}).observe(document.body,{childList:!0,subtree:!0})}();