{"version":3,"file":"accordions/view.js","mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,gBAAgBA,CAACC,MAAM,GAAG,EAAE,EAAE;EACtC,MAAMC,UAAU,GAAG,gEAAgE;EACnF,IAAIC,MAAM,GAAG,EAAE;EACf,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,MAAM,EAAEG,CAAC,EAAE,EAAE;IAChCD,MAAM,IAAID,UAAU,CAACG,MAAM,CAACC,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,CAAC,GAAGN,UAAU,CAACD,MAAM,CAAC,CAAC;EAC3E;EACA,OAAOE,MAAM;AACd;AAEA,SAASM,kBAAkBA,CAACC,WAAW,EAAEC,MAAM,EAAE;EAChDC,OAAO,CAACC,GAAG,CAAC,mCAAmCH,WAAW,aAAaC,MAAM,EAAE,CAAC;EAChFG,QAAQ,CAACC,MAAM,GAAG,gBAAgBL,WAAW,IAAIC,MAAM,GAAG,GAAG,GAAG,GAAG,wBAAwB;AAC5F;AAEA,SAASK,mBAAmBA,CAACC,MAAM,EAAE;EACpC;EACA,OAAOA,MAAM,CAACC,YAAY,CAAC,mBAAmB,CAAC;AAChD;;AAEA;AACA;AACA;AACA,SAASC,cAAcA,CAAA,EAAG;EACzB,MAAMC,eAAe,GAAGN,QAAQ,CAACO,gBAAgB,CAAC,yBAAyB,CAAC;EAC5ED,eAAe,CAACE,OAAO,CAAC,CAACC,MAAM,EAAEC,UAAU,KAAK;IAC/C,MAAMC,gBAAgB,GAAGF,MAAM,CAACF,gBAAgB,CAAC,0CAA0C,CAAC;IAC5FI,gBAAgB,CAACH,OAAO,CAAEL,MAAM,IAAK;MACpC,MAAMP,WAAW,GAAGM,mBAAmB,CAACC,MAAM,CAAC;MAC/CL,OAAO,CAACC,GAAG,CAAC,gDAAgD,EAAEH,WAAW,CAAC;MAC1E;MACA,MAAMgB,QAAQ,GAAG1B,gBAAgB,CAAC,CAAC;MACnCiB,MAAM,CAACU,EAAE,GAAG,oBAAoBD,QAAQ,EAAE;MAC1CT,MAAM,CAACW,kBAAkB,CAACD,EAAE,GAAG,mBAAmBD,QAAQ,EAAE;MAE5DT,MAAM,CAACY,OAAO,GAAG,YAAY;QAC5B,MAAMC,QAAQ,GAAG,IAAI,CAACC,SAAS,CAACd,MAAM,CAAC,WAAW,CAAC;QACnD,IAAI,CAACW,kBAAkB,CAACG,SAAS,CAACd,MAAM,CAAC,WAAW,CAAC;QACrD,IAAI,CAACe,YAAY,CAAC,eAAe,EAAEF,QAAQ,GAAG,MAAM,GAAG,OAAO,CAAC;QAC/DlB,OAAO,CAACC,GAAG,CAAC,wBAAwBH,WAAW,gBAAgBoB,QAAQ,EAAE,CAAC;QAC1ErB,kBAAkB,CAACC,WAAW,EAAEoB,QAAQ,CAAC;MAC1C,CAAC;IACF,CAAC,CAAC;EACH,CAAC,CAAC;AACH;AAEAG,MAAM,CAACC,gBAAgB,CACtB,MAAM,EACN,YAAY;EACXf,cAAc,CAAC,CAAC;AACjB,CAAC,EACD,KACD,CAAC,C","sources":["webpack://zp-accordions/./src/accordions/view.js"],"sourcesContent":["/**\n * Use this file for JavaScript code that you want to run in the front-end\n * on posts/pages that contain this block.\n *\n * When this file is defined as the value of the `viewScript` property\n * in `block.json` it will be enqueued on the front end of the site.\n *\n * Example:\n *\n * ```js\n * {\n *   \"viewScript\": \"file:./view.js\"\n * }\n * ```\n *\n * @see https://developer.wordpress.org/block-editor/reference-guides/block-api/block-metadata/#view-script\n */\n\nfunction generateRandomId(length = 10) {\n\tconst characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\tlet result = '';\n\tfor (let i = 0; i < length; i++) {\n\t\tresult += characters.charAt(Math.floor(Math.random() * characters.length));\n\t}\n\treturn result;\n}\n\nfunction setAccordionCookie(accordionId, isOpen) {\n\tconsole.log(`Setting cookie for accordionId: ${accordionId}, isOpen: ${isOpen}`);\n\tdocument.cookie = `zp_accordion_${accordionId}=${isOpen ? '1' : '0'}; path=/; SameSite=Lax`;\n}\n\nfunction getOrSetAccordionId(toggle) {\n\t// Only get the data-accordion-id set server-side in render.php\n\treturn toggle.getAttribute('data-accordion-id');\n}\n\n/**\n * initAccordions\n */\nfunction initAccordions() {\n\tconst accordionGroups = document.querySelectorAll('.wp-block-zp-accordions');\n\taccordionGroups.forEach((parent, groupIndex) => {\n\t\tconst accordionToggles = parent.querySelectorAll('.wp-block-zp-accordion .accordion-toggle');\n\t\taccordionToggles.forEach((toggle) => {\n\t\t\tconst accordionId = getOrSetAccordionId(toggle);\n\t\t\tconsole.log('Accordion toggle found with data-accordion-id:', accordionId);\n\t\t\t// IDs for accessibility (optional, not used for state)\n\t\t\tconst uniqueId = generateRandomId();\n\t\t\ttoggle.id = `accordion-header-${uniqueId}`;\n\t\t\ttoggle.nextElementSibling.id = `accordion-panel-${uniqueId}`;\n\n\t\t\ttoggle.onclick = function () {\n\t\t\t\tconst isActive = this.classList.toggle('is-active');\n\t\t\t\tthis.nextElementSibling.classList.toggle('is-active');\n\t\t\t\tthis.setAttribute('aria-expanded', isActive ? 'true' : 'false');\n\t\t\t\tconsole.log(`Toggled accordionId: ${accordionId}, new state: ${isActive}`);\n\t\t\t\tsetAccordionCookie(accordionId, isActive);\n\t\t\t};\n\t\t});\n\t});\n}\n\nwindow.addEventListener(\n\t'load',\n\tfunction () {\n\t\tinitAccordions();\n\t},\n\tfalse\n);\n"],"names":["generateRandomId","length","characters","result","i","charAt","Math","floor","random","setAccordionCookie","accordionId","isOpen","console","log","document","cookie","getOrSetAccordionId","toggle","getAttribute","initAccordions","accordionGroups","querySelectorAll","forEach","parent","groupIndex","accordionToggles","uniqueId","id","nextElementSibling","onclick","isActive","classList","setAttribute","window","addEventListener"],"sourceRoot":""}